.
├── Dockerfile
├── app
│   └── trip
│       └── confirm
├── apply_migrations.sql
├── bun.lockb
├── clear-auth.html
├── components.json
├── create-exec-rpc.sql
├── create-queue-infrastructure.sql
├── create_simple_test.py
├── create_test_trip.sql
├── current-errors.log
├── database
│   └── migrations
│       ├── 20250603171417_add_selected_seat_type_to_flight_offers.sql
│       └── 20250603195822_update_rpc_auto_book_match_signature.sql
├── database-schema-fixes-corrected.sql
├── database-schema-fixes.sql
├── database-schema-simple.sql
├── debug-auth.html
├── deno.lock
├── deploy.sh
├── dev-server.log
├── dev.log
├── docker
│   └── nginx.conf
├── docker-compose.yml
├── docs
│   ├── REPOSITORY_ORGANIZATION_GUIDELINES.md
│   ├── api
│   │   └── stripe
│   ├── general
│   ├── legacy
│   └── repo_overview.md
├── essential-schema-fixes.sql
├── final-20-errors.log
├── final-errors.log
├── final-schema-fixes.sql
├── fix-notifications-fk.sql
├── fix-policies.sql
├── git-branch-safe.sh
├── index.html
├── insert_test_data.sql
├── lib
│   └── utils.ts
├── logs
│   ├── day4-execution-complete.md
│   └── p0-tasks-complete.md
├── monitoring
│   └── prometheus
├── netlify.toml
├── package-lock.json
├── package.json
├── playwright-report
│   └── index.html
├── pnpm-lock.yaml
├── public
│   ├── favicon.ico
│   └── placeholder.svg
├── quick-start.sh
├── schema_dump.sql
├── scripts
│   ├── analytics
│   ├── development
│   │   └── start-functions-with-env.sh
│   └── performance
├── simple_test_data.sql
├── sql
│   └── fix_flight_offers_rls.sql
├── src
│   ├── App.css
│   ├── App.tsx
│   ├── App.tsx.bak_router_original
│   ├── adapters
│   ├── app
│   │   └── (dashboard)
│   ├── components
│   │   ├── ActiveBookingsPill.tsx
│   │   ├── AuthGuard.tsx
│   │   ├── BehavioralTooltip.tsx
│   │   ├── DynamicSocialProof.tsx
│   │   ├── ErrorBoundary.tsx
│   │   ├── HowItWorksSection.tsx
│   │   ├── PartnerLogos.tsx
│   │   ├── ProfileForm.tsx
│   │   ├── SimplifiedSocialProof.tsx
│   │   ├── ThreeStepExplainer.tsx
│   │   ├── TravelerDataForm.tsx
│   │   ├── TripOffersV2Skeleton.tsx
│   │   ├── autobooking
│   │   ├── dashboard
│   │   ├── debug
│   │   ├── filtering
│   │   ├── forms
│   │   ├── layout
│   │   ├── navigation
│   │   ├── trip
│   │   └── ui
│   ├── contexts
│   │   └── PersonalizationContext.tsx
│   ├── data
│   │   ├── airlineLookup.ts
│   │   ├── airportLookup.ts
│   │   └── airports.ts
│   ├── debug
│   │   └── checkFlightOffers.ts
│   ├── flightSearchV2
│   │   ├── createEnv.ts
│   │   ├── types.ts
│   │   ├── useFlightOffers.test.ts
│   │   ├── useFlightOffers.ts
│   │   ├── useFlightSearchV2Flag.ts
│   │   └── utils
│   ├── hooks
│   │   ├── use-mobile.tsx
│   │   ├── use-toast.ts
│   │   ├── useAnalytics.ts
│   │   ├── useBehavioralTriggers.ts
│   │   ├── useCampaigns.ts
│   │   ├── useCurrentUser.ts
│   │   ├── useDuffelFlights.ts
│   │   ├── useDuffelPayment.ts
│   │   ├── useFeatureFlag.ts
│   │   ├── useFilterState.ts
│   │   ├── useNetworkStatus.ts
│   │   ├── useOptimizedQuery.ts
│   │   ├── usePaymentMethods.ts
│   │   ├── usePoolsSafe.ts
│   │   ├── useProfile.ts
│   │   ├── useTravelerInfoCheck.ts
│   │   ├── useTripOffers.ts
│   │   └── useTripOffersLegacy.ts
│   ├── index.css
│   ├── integrations
│   │   └── supabase
│   ├── json-overrides.d.ts
│   ├── lib
│   │   ├── filtering
│   │   ├── invokeEdgeFn.ts
│   │   ├── logger.ts
│   │   ├── supabaseUtils.ts
│   │   └── utils.ts
│   ├── main.tsx
│   ├── pages
│   │   ├── AutoBookingDashboard.tsx
│   │   ├── AutoBookingNew.tsx
│   │   ├── Dashboard.tsx
│   │   ├── Dashboard.tsx.bak_original_content_dashboard
│   │   ├── DuffelTest.tsx
│   │   ├── Index.tsx
│   │   ├── Login.tsx
│   │   ├── NotFound.tsx
│   │   ├── Profile.tsx
│   │   ├── TripConfirm.tsx
│   │   ├── TripConfirm.tsx.bak
│   │   ├── TripConfirm.tsx.bak_original_content
│   │   ├── TripConfirm.tsx.bak_original_content_tripconfirm
│   │   ├── TripNew.tsx
│   │   ├── TripOffers.tsx
│   │   ├── TripOffersV2.test.tsx
│   │   ├── TripOffersV2.tsx
│   │   ├── TripOffersV2Enhanced.tsx
│   │   ├── TripOffersWithPools.tsx
│   │   └── Wallet.tsx
│   ├── serverActions
│   │   ├── getFlightOffers.test.ts
│   │   └── getFlightOffers.ts
│   ├── services
│   │   ├── api
│   │   ├── campaignService.ts
│   │   ├── currencyService.ts
│   │   ├── flightApi.client.ts
│   │   ├── flightApi.test.ts
│   │   ├── flightApi.ts
│   │   ├── travelerProfileService.ts
│   │   ├── tripOffersService.ts
│   │   └── tripService.ts
│   ├── tests
│   │   ├── __helpers
│   │   ├── components
│   │   ├── coverage
│   │   ├── hooks
│   │   ├── integration
│   │   ├── mocks
│   │   ├── pages
│   │   ├── payment-architecture.test.ts
│   │   ├── performance
│   │   ├── serverActions
│   │   ├── services
│   │   └── utils
│   ├── types
│   │   ├── campaign.ts
│   │   ├── form.ts
│   │   └── offer.ts
│   └── utils
│       ├── combineDateTime.ts
│       ├── devAuth.ts
│       ├── formatDateTime.ts
│       ├── getPoolDisplayName.ts
│       ├── monitoring.ts
│       ├── parseDuration.ts
│       ├── retryQueue.ts
│       ├── roundTripFiltering.ts
│       └── toJsonSafe.ts
├── start-dev.sh
├── start-functions-with-env.sh
├── supabase
│   ├── config.toml
│   ├── functions
│   │   ├── _shared
│   │   ├── auto-book
│   │   ├── auto-book-duffel
│   │   ├── cancel-booking
│   │   ├── create-booking
│   │   ├── create-booking-request
│   │   ├── create-payment-session
│   │   ├── currency-service
│   │   ├── delete-payment-method
│   │   ├── deno.json
│   │   ├── duffel-book
│   │   ├── duffel-search
│   │   ├── duffel-test
│   │   ├── duffel-webhook
│   │   ├── execute-sql
│   │   ├── flight-offers-v2
│   │   ├── flight-search
│   │   ├── flight-search-v2
│   │   ├── get-personalization-data
│   │   ├── identity-verification
│   │   ├── lib
│   │   ├── manage-campaigns
│   │   ├── manage-payment-methods
│   │   ├── manage-traveler-profiles
│   │   ├── notification-worker
│   │   ├── prepare-auto-booking-charge
│   │   ├── process-booking
│   │   ├── process-campaigns
│   │   ├── queue-management
│   │   ├── scheduler-booking
│   │   ├── scheduler-flight-search
│   │   ├── scheduler-reminders
│   │   ├── secure-traveler-profiles
│   │   ├── send-booking-confirmation
│   │   ├── send-booking-failed
│   │   ├── send-notification
│   │   ├── send-reminder
│   │   ├── send-sms-reminder
│   │   ├── set-default-payment-method
│   │   ├── stripe-webhook
│   │   ├── templates
│   │   └── tests
│   ├── migrations
│   │   ├── 00000000000000_initial_schema.sql
│   │   ├── 20250524090000_rls_booking_requests.sql
│   │   ├── 20250524_add_sessions_and_status_enum_booking_requests.sql
│   │   ├── 20250601080000_add_booking_fields.sql
│   │   ├── 20250601081000_add_payments_table.sql
│   │   ├── 20250601082000_add_booking_attempts_table.sql
│   │   ├── 20250601083000_add_enum_types.sql
│   │   ├── 20250602010000_create_notifications_table.sql
│   │   ├── 20250602010001_alter_payments_pi_nullable.sql
│   │   ├── 20250602050000_add_notifications_payload.sql
│   │   ├── 20250603154754_add_columns_to_trip_requests.sql
│   │   ├── 20250603154815_add_baggage_to_flight_offers.sql
│   │   ├── 20250603154831_add_reminder_columns_to_bookings.sql
│   │   ├── 20250603171024_add_selected_seat_type_to_flight_offers.sql
│   │   ├── 20250604120000_add_payment_captured_to_booking_requests.sql
│   │   ├── 20250607_comprehensive_schema_update.sql
│   │   ├── 20250609175439_backfill_and_enforce_destination_location_code.sql
│   │   ├── 20250609195723_backfill_and_enforce_destination_location_code.sql
│   │   ├── 20250610130000_add_cancelled_to_booking_request_status_enum.sql
│   │   ├── 20250610162212_add_feature_flags_and_auto_booking_requests.sql
│   │   ├── 20250610195459_edge_function.sql
│   │   ├── 20250610_add_booking_fields.sql
│   │   ├── 20250611002949_add_last_checked_at_to_trip_requests.sql
│   │   ├── 20250613_add_last_checked_at_to_trip_requests.sql
│   │   ├── 20250617145657_add_search_mode_and_flag.sql
│   │   ├── 20250617202218_create_flight_offers_v2.sql
│   │   ├── 20250622023900_reset_flight_offers_v2_schema.sql
│   │   ├── 20250622140000_enable_flight_search_v2_feature.sql
│   │   ├── 20250622173734_add_missing_columns_to_flight_offers_v2.sql
│   │   ├── 20250622182403_add_booking_url_to_flight_offers_v2.sql
│   │   ├── 20250622_enable_rls_security_fixes.sql
│   │   ├── 20250625000001_duffel_integration.sql
│   │   ├── 20250625185438_fix_duffel_rpc_booking_status.sql
│   │   ├── 20250625185614_fix_updated_at_column_issue.sql
│   │   ├── 20250626214300_add_provider_to_flight_offers.sql
│   │   ├── 20250626215000_add_flight_offers_rls_policies.sql
│   │   ├── 20250627000001_create_traveler_profiles.sql
│   │   ├── 20250627000002_create_campaigns_and_payment_methods.sql
│   │   ├── 20250627000003_create_identity_verification.sql
│   │   ├── 20250627000004_create_multi_currency_support.sql
│   │   └── 20250628000001_communication_architecture_foundation.sql
│   ├── migrations_backup
│   │   ├── 00000000000000_initial_schema.sql
│   │   ├── 20250524090000_rls_booking_requests.sql
│   │   ├── 20250524_add_sessions_and_status_enum_booking_requests.sql
│   │   ├── 20250601080000_add_booking_fields.sql
│   │   ├── 20250601081000_add_payments_table.sql
│   │   ├── 20250601082000_add_booking_attempts_table.sql
│   │   ├── 20250601083000_add_enum_types.sql
│   │   ├── 20250602010000_create_notifications_table.sql
│   │   ├── 20250602010001_alter_payments_pi_nullable.sql
│   │   ├── 20250602050000_add_notifications_payload.sql
│   │   ├── 20250603154754_add_columns_to_trip_requests.sql
│   │   ├── 20250603154815_add_baggage_to_flight_offers.sql
│   │   ├── 20250603154831_add_reminder_columns_to_bookings.sql
│   │   ├── 20250603171024_add_selected_seat_type_to_flight_offers.sql
│   │   ├── 20250604120000_add_payment_captured_to_booking_requests.sql
│   │   ├── 20250607_comprehensive_schema_update.sql
│   │   ├── 20250609175439_backfill_and_enforce_destination_location_code.sql
│   │   ├── 20250609195723_backfill_and_enforce_destination_location_code.sql
│   │   ├── 20250610130000_add_cancelled_to_booking_request_status_enum.sql
│   │   ├── 20250610162212_add_feature_flags_and_auto_booking_requests.sql
│   │   ├── 20250610182333_create_auto_booking_requests.sql
│   │   ├── 20250610195459_edge_function.sql
│   │   └── 20250610_add_booking_fields.sql
│   └── src
│       └── flightApi.edge.ts
├── test-results
│   └── e2e-wallet-smoke-Wallet-UI-eac92-et-tab-loads-without-errors-chromium
│       ├── error-context.md
│       ├── test-failed-1.png
│       └── video.webm
├── test-smoke.sh
├── test_duffel_integration.sh
├── test_phase1_complete.sh
├── tests
│   ├── accessibility
│   ├── components
│   │   └── personalization
│   ├── reports
│   │   └── oauth
│   └── security
├── tsconfig.json
├── tsconfig.node.json
├── typescript-errors-baseline.log
├── typescript-errors-current.log
├── useFlightOffers_baseline.ts
├── vercel.json
└── vite.config.ts

120 directories, 223 files
